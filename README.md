# MathSolver ğŸ“

AI æ•°å­¦è§£é¢˜åŠ©æ‰‹ - ä¸‰å¼•æ“æ™ºèƒ½æ¶æ„ (Vercel Best Practices)

![Node.js](https://img.shields.io/badge/Node.js-18%2B-green)
![License](https://img.shields.io/badge/License-MIT-blue)

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“¸ **å›¾ç‰‡è¯†åˆ«** - æ‹ç…§ä¸Šä¼ æ•°å­¦é¢˜ï¼Œè‡ªåŠ¨è¯†åˆ«é¢˜ç›®å†…å®¹
- ğŸ” **OCR æå–** - é«˜ç²¾åº¦æ–‡å­—è¯†åˆ«ï¼Œæ”¯æŒå¤æ‚æ•°å­¦å…¬å¼ (LaTeX)
- ğŸ“Š **å›¾å½¢æ£€æµ‹** - è‡ªåŠ¨æå–å‡ ä½•å›¾å½¢ã€å‡½æ•°å›¾åƒï¼Œæ”¯æŒè£å‰ªå’Œå¢å¼º
- ğŸ§  **æ™ºèƒ½è§£ç­”** - AI åˆ†æ­¥éª¤è¯¦ç»†è®²è§£è§£é¢˜è¿‡ç¨‹ï¼ŒåŒ…å«ç›¸å…³çŸ¥è¯†ç‚¹
- ğŸ’¬ **å¯¹è¯è¿½é—®** - æ”¯æŒé’ˆå¯¹é¢˜ç›®è¿›è¡Œå¤šè½®å¯¹è¯è¿½é—®
- ğŸ“± **å“åº”å¼è®¾è®¡** - æè‡´ UI/UXï¼Œå®Œç¾é€‚é…æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘ï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼
- â„ï¸ **æ¨¡å—åŒ–æ¶æ„** - å‰åç«¯åˆ†ç¦»ï¼ŒæœåŠ¡å±‚è§£è€¦ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

æœ¬ç‰¹å®šé‡‡ç”¨**åŒå±‚æ¶æ„**: Node.js åç«¯ç½‘å…³ + æ¨¡å—åŒ–å‰ç«¯ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MathSolver                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¼•æ“ A: SiliconFlow API (services/siliconflow.js)      â”‚
â”‚  â”œâ”€â”€ Qwen2.5-VL-72B (è§†è§‰ç†è§£ + OCR)                    â”‚
â”‚  â””â”€â”€ è´Ÿè´£ï¼šå›¾å½¢æè¿° (Vision)ã€æ–‡å­—æå– (OCR)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¼•æ“ B: DeepSeek API (services/deepseek.js)            â”‚
â”‚  â”œâ”€â”€ DeepSeek Chat (é€»è¾‘æ¨ç†)                           â”‚
â”‚  â””â”€â”€ è´Ÿè´£ï¼šä¸‰æ®µå¼è§£é¢˜ (æ¨¡å‹åˆ¤æ–­ â†’ æ€è·¯ â†’ æ­¥éª¤)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¼•æ“ C: Diagram Detector (services/diagram_detector.js)â”‚
â”‚  â”œâ”€â”€ MinerU (PDF/æ–‡æ¡£é«˜ä¿çœŸè§£æ)                        â”‚
â”‚  â”œâ”€â”€ Qwen Grounding (å›¾å½¢è¾¹ç•Œæ¡†æ£€æµ‹)                    â”‚
â”‚  â””â”€â”€ è´Ÿè´£ï¼šç²¾å‡†æå–é¢˜ç›®ä¸­çš„è¾…åŠ©å›¾ç‰‡                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- npm 8+

### ä¸€é”®é…ç½®

**Windows:**
```batch
setup.bat
```

**Linux/macOS:**
```bash
chmod +x setup.sh
./setup.sh
```

### æ‰‹åŠ¨é…ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/ICeCreamChat/MathSolver.git
cd MathSolver

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ API Keys

# å¯åŠ¨æœåŠ¡
npm start
```

### å¯åŠ¨æœåŠ¡

**Windows:**
```batch
start.bat
```

**Linux/macOS:**
```bash
./start.sh
```

è®¿é—® http://localhost:3003

## âš™ï¸ é…ç½®è¯´æ˜

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# SiliconFlow API (è§†è§‰æ¨¡å‹ - Qwen/InternVL)
SILICONFLOW_API_KEY=sk-xxx
# é»˜è®¤æ¨¡å‹: Qwen/Qwen2.5-VL-72B-Instruct

# DeepSeek API (æ¨ç†æ¨¡å‹)  
DEEPSEEK_API_KEY=sk-xxx
DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions

# MinerU äº‘ API (é«˜ç²¾åº¦å›¾å½¢æå–ï¼Œå¯é€‰)
MINERU_ENABLED=true
MINERU_API_KEY=eyJxxx...
MINERU_URL=https://mineru.net/api/v4

# æœåŠ¡å™¨ç«¯å£
PORT=3003
```

### API è·å–æ–¹å¼

| API | ç”¨é€” | è·å–åœ°å€ |
|-----|-----|----------|
| SiliconFlow | è§†è§‰/OCR | https://cloud.siliconflow.cn |
| DeepSeek | é€»è¾‘æ¨ç† | https://platform.deepseek.com |
| MinerU | å›¾å½¢æå– | https://mineru.net |

## ğŸ“ é¡¹ç›®ç»“æ„

é¡¹ç›®å·²è¿›è¡Œæ¨¡å—åŒ–é‡æ„ï¼Œç»“æ„æ¸…æ™°ï¼š

```
MathSolver/
â”œâ”€â”€ server.js                  # å…¥å£æ–‡ä»¶ (Express App)
â”œâ”€â”€ .env                       # ç¯å¢ƒå˜é‡ (ä¸è¦æäº¤)
â”œâ”€â”€ .gitignore                 # Git å¿½ç•¥è§„åˆ™
â”œâ”€â”€ package.json               # ä¾èµ–é…ç½®
â”‚
â”œâ”€â”€ services/                  # [åç«¯æœåŠ¡å±‚]
â”‚   â”œâ”€â”€ config.js              # é…ç½®ç®¡ç† & Mock æ•°æ®
â”‚   â”œâ”€â”€ deepseek.js            # æ¨ç†æœåŠ¡å°è£…
â”‚   â”œâ”€â”€ siliconflow.js         # è§†è§‰ & OCR æœåŠ¡å°è£…
â”‚   â”œâ”€â”€ mineru.js              # MinerU å›¾å½¢æå–æœåŠ¡
â”‚   â”œâ”€â”€ diagram_detector.js    # å›¾å½¢æ£€æµ‹ä¸»é€»è¾‘ (å¤šå±‚çº§ Fallback)
â”‚   â””â”€â”€ image_utils.js         # å›¾ç‰‡å¤„ç†å·¥å…· (Sharp)
â”‚
â”œâ”€â”€ public/                    # [å‰ç«¯é™æ€èµ„æº]
â”‚   â”œâ”€â”€ index.html             # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ style.css              # æ ·å¼æ–‡ä»¶ (Glassmorphism + Dark Mode)
â”‚   â”œâ”€â”€ script.js              # ä¸»é€»è¾‘å…¥å£
â”‚   â”‚
â”‚   â””â”€â”€ js/                    # [å‰ç«¯æ¨¡å—]
â”‚       â”œâ”€â”€ api_client.js      # API è¯·æ±‚å°è£…
â”‚       â”œâ”€â”€ math_renderer.js   # LaTeX/Markdown æ¸²æŸ“å™¨
â”‚       â””â”€â”€ ui_manager.js      # UI äº¤äº’ç®¡ç†
â”‚
â””â”€â”€ uploads/                   # ä¸´æ—¶æ–‡ä»¶ç›®å½• (è‡ªåŠ¨æ¸…ç†)
```

## ğŸ”Œ API ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | å‚æ•° | è¯´æ˜ |
|------|------|------|------|
| `/api/solve` | POST | `image` (File) æˆ– `imageBase64` | æ ¸å¿ƒæ¥å£ï¼šä¸Šä¼ å›¾ç‰‡ï¼Œè¿”å›è¯†åˆ«æ–‡æœ¬ã€å›¾å½¢åŠè§£é¢˜æ­¥éª¤ |
| `/api/chat` | POST | `messages` (Array) | å¯¹è¯æ¥å£ï¼šæ”¯æŒä¸Šä¸‹æ–‡è¿½é—® |
| `/api/health` | GET | - | å¥åº·æ£€æŸ¥ï¼Œè¿”å›å½“å‰æ¨¡å¼ (Mock/Prod) |

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“§ è”ç³»

- GitHub: [@ICeCreamChat](https://github.com/ICeCreamChat)
